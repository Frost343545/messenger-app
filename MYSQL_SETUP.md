# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MySQL –¥–ª—è Messenger –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üóÑÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- MySQL Server 8.0 –∏–ª–∏ –Ω–æ–≤–µ–µ
- MySQL Workbench (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
- –î–æ—Å—Ç—É–ø –∫ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ MySQL

## üìã –®–∞–≥–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ MySQL Server

#### Windows:
```bash
# –°–∫–∞—á–∞–π—Ç–µ MySQL Installer —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞
# https://dev.mysql.com/downloads/installer/
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
```

#### macOS:
```bash
# –ò—Å–ø–æ–ª—å–∑—É—è Homebrew
brew install mysql

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
brew services start mysql
```

#### Linux (Ubuntu/Debian):
```bash
sudo apt update
sudo apt install mysql-server

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
sudo systemctl start mysql
sudo systemctl enable mysql
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

```bash
# –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
sudo mysql_secure_installation

# –í–æ–π–¥–∏—Ç–µ –≤ MySQL
sudo mysql -u root -p
```

### 3. –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```sql
-- –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
CREATE DATABASE messenger_db
CHARACTER SET utf8mb4
COLLATE utf8mb4_unicode_ci;

-- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
CREATE USER 'messenger_user'@'%' IDENTIFIED BY 'your_secure_password';

-- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
GRANT ALL PRIVILEGES ON messenger_db.* TO 'messenger_user'@'%';
FLUSH PRIVILEGES;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
SELECT User, Host FROM mysql.user;
```

### 4. –ò–º–ø–æ—Ä—Ç —Å—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –ò–º–ø–æ—Ä—Ç SQL —Ñ–∞–π–ª–∞
mysql -u messenger_user -p messenger_db < database/schema.sql

# –ò–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –≤—Ä—É—á–Ω—É—é –≤ MySQL Workbench
```

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `app/src/main/java/com/messenger/app/data/remote/config/DatabaseConfig.kt` –∏ –∏–∑–º–µ–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```kotlin
object DatabaseConfig {
    // MySQL Server Configuration
    const val MYSQL_HOST = "your-actual-mysql-server.com" // –∏–ª–∏ "localhost"
    const val MYSQL_PORT = 3306
    const val MYSQL_DATABASE = "messenger_db"
    const val MYSQL_USERNAME = "messenger_user"
    const val MYSQL_PASSWORD = "your_secure_password"
    
    // API Configuration (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ REST API)
    const val API_BASE_URL = "http://your-api-server.com/api/"
}
```

### 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ç–µ–≤–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ bind-address (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ —É–¥–∞–ª–µ–Ω–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ):

```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ MySQL
sudo nano /etc/mysql/mysql.conf.d/mysqld.cnf

# –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É bind-address –∏ –∏–∑–º–µ–Ω–∏—Ç–µ –Ω–∞:
bind-address = 0.0.0.0

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ MySQL
sudo systemctl restart mysql
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–∞:

```bash
# Ubuntu/Debian
sudo ufw allow 3306

# CentOS/RHEL
sudo firewall-cmd --permanent --add-port=3306/tcp
sudo firewall-cmd --reload
```

### 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

```bash
# –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
mysql -h your-mysql-server.com -u messenger_user -p messenger_db

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü
USE messenger_db;
SHOW TABLES;
```

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–î–æ–±–∞–≤—å—Ç–µ –≤ `my.cnf`:

```ini
[mysqld]
# InnoDB –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
innodb_buffer_pool_size = 1G
innodb_log_file_size = 256M
innodb_flush_log_at_trx_commit = 2

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
max_connections = 200
max_connect_errors = 1000000

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫—ç—à–∞
query_cache_size = 64M
query_cache_type = 1
```

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
mysqldump -u messenger_user -p messenger_db > backup_$(date +%Y%m%d_%H%M%S).sql

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
mysql -u messenger_user -p messenger_db < backup_file.sql
```

## üö® –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 1. –ü–∞—Ä–æ–ª–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–æ–∂–Ω—ã–µ –ø–∞—Ä–æ–ª–∏
- –†–µ–≥—É–ª—è—Ä–Ω–æ –º–µ–Ω—è–π—Ç–µ –ø–∞—Ä–æ–ª–∏
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–æ–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

### 2. –î–æ—Å—Ç—É–ø
- –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ IP –∞–¥—Ä–µ—Å–∞–º–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ SSL –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
- –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
SHOW PROCESSLIST;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
SHOW GRANTS FOR 'messenger_user'@'%';
```

## üì± –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —ç–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ MySQL

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
```
Error: Can't connect to MySQL server
```
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –ó–∞–ø—É—â–µ–Ω –ª–∏ MySQL —Å–µ—Ä–≤–∏—Å
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å IP –∞–¥—Ä–µ—Å–∞ –∏ –ø–æ—Ä—Ç–∞
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∞–π—Ä–≤–æ–ª–∞
- –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:
```
Error: Access denied for user
```
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–∞—Ä–æ–ª—è
- –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –•–æ—Å—Ç, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç–µ—Å—å

### –û—à–∏–±–∫–∞ SSL:
```
Error: SSL connection error
```
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ SSL –≤ MySQL
- –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- –ò–ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç–µ SSL –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ MySQL: `sudo tail -f /var/log/mysql/error.log`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ç–∏ –∏ —Ñ–∞–π—Ä–≤–æ–ª–∞
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ MySQL

---

**–£—Å–ø–µ—à–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏! üéâ**
